<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ ch∆°i h·ªçc to√°n vui nh·ªôn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap');
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #fcebeb;
            background-image: linear-gradient(135deg, #fcebeb 0%, #d8eaff 100%);
        }
        .container-bg {
            background-color: #fff9ed;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .section {
            border: 4px solid #f6d19e;
            border-radius: 12px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        .section:hover {
            transform: translateY(-5px);
        }
        .math-problem {
            font-size: 2.25rem;
            font-weight: 700;
            text-shadow: 2px 2px #fff;
            padding: 1rem;
        }
        .green-text {
            color: #16a34a;
        }
        .yellow-text {
            color: #ca8a04;
        }
        .pink-text {
            color: #db2777;
        }
        .blue-text {
            color: #3b82f6;
        }
        .shape {
            display: inline-block;
            font-size: 3rem;
            margin: 0 0.25rem;
            text-shadow: 1px 1px #888;
        }
        .draggable {
            cursor: move;
        }
        .drop-zone {
            border: 2px dashed #9ca3af;
            background-color: #f3f4f6;
            transition: background-color 0.3s;
            min-width: 50px;
            min-height: 50px;
        }
        .drop-zone.active {
            background-color: #dbeafe;
        }
        .answer-input {
            width: 80px;
            text-align: center;
            font-size: 2rem;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 5px;
        }
        .answer-btn {
            padding: 10px 20px;
            font-size: 1.25rem;
            font-weight: bold;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .answer-btn.correct {
            background-color: #10b981;
        }
        .answer-btn.wrong {
            background-color: #ef4444;
        }
        .answer-btn.op-btn {
            padding: 10px 25px;
        }
        .operator-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
    </style>
</head>
<body class="p-8">

<div class="max-w-6xl mx-auto container-bg p-8">
    <!-- Header -->
    <div class="text-center bg-fuchsia-400 text-white rounded-xl py-4 px-8 mb-8 shadow-md">
        <h1 class="text-3xl sm:text-4xl font-bold">Tr√≤ ch∆°i h·ªçc to√°n vui nh·ªôn</h1>
    </div>

    <!-- Score Display -->
    <div class="text-center mb-6 grid grid-cols-2 sm:grid-cols-4 gap-4">
        <div>
            <span class="text-xl font-bold text-green-600">Ph√©p c·ªông:</span>
            <span class="text-2xl font-bold" id="addition-score">0</span>
        </div>
        <div>
            <span class="text-xl font-bold text-yellow-600">Ph√©p tr·ª´:</span>
            <span class="text-2xl font-bold" id="subtraction-score">0</span>
        </div>
        <div>
            <span class="text-xl font-bold text-pink-600">So s√°nh:</span>
            <span class="text-2xl font-bold" id="comparison-score">0</span>
        </div>
        <div>
            <span class="text-xl font-bold text-blue-600">Gh√©p c·∫∑p:</span>
            <span class="text-2xl font-bold" id="matching-score">0</span>
        </div>
    </div>
    <div class="text-center mb-8">
        <span class="text-2xl font-bold text-gray-700">T·ªïng ƒëi·ªÉm:</span>
        <span class="text-4xl font-bold text-indigo-600" id="total-score">0</span>
    </div>

    <!-- Main Game Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Ph√©p c·ªông (Tr√≤ ch∆°i 1) -->
        <div class="section p-6 flex flex-col items-center">
            <div class="math-problem green-text text-2xl sm:text-3xl" id="addition-problem"></div>
            <div class="flex items-center space-x-2 my-4 flex-wrap" id="addition-shapes-container">
                <div class="flex flex-wrap" id="addition-shapes-1"></div>
                <div class="font-bold text-3xl text-gray-500 mx-2">+</div>
                <div class="flex flex-wrap" id="addition-shapes-2"></div>
                <div class="font-bold text-3xl text-gray-500 mx-2">=</div>
                <input type="number" class="answer-input" id="addition-answer">
            </div>
            <button class="answer-btn bg-green-500 hover:bg-green-600" onclick="checkAddition()">Ki·ªÉm tra</button>
            <p class="text-center text-sm text-gray-500 mt-2" id="addition-feedback">(Ph√©p c·ªông)</p>
        </div>

        <!-- Ph√©p tr·ª´ (Tr√≤ ch∆°i 2) -->
        <div class="section p-6 flex flex-col items-center">
            <div class="math-problem yellow-text text-2xl sm:text-3xl" id="subtraction-problem"></div>
            <div class="flex items-center space-x-2 my-4 flex-wrap" id="subtraction-shapes-container">
                <div class="flex flex-wrap" id="subtraction-shapes-1"></div>
                <div class="font-bold text-3xl text-gray-500 mx-2">-</div>
                <div class="flex flex-wrap" id="subtraction-shapes-2"></div>
                <div class="font-bold text-3xl text-gray-500 mx-2">=</div>
                <input type="number" class="answer-input" id="subtraction-answer">
            </div>
            <button class="answer-btn bg-yellow-500 hover:bg-yellow-600" onclick="checkSubtraction()">Ki·ªÉm tra</button>
            <p class="text-center text-sm text-gray-500 mt-2" id="subtraction-feedback">(Ph√©p tr·ª´)</p>
        </div>

        <!-- So s√°nh (Tr√≤ ch∆°i 3) -->
        <div class="section p-6 flex flex-col items-center">
            <div class="math-problem pink-text text-2xl sm:text-3xl">So s√°nh</div>
            <div class="flex items-center justify-center space-x-8 my-4">
                <div class="flex flex-col items-center">
                    <div class="font-bold text-6xl text-orange-400 text-shadow" id="compare-num1"></div>
                </div>
                <div class="operator-group mt-4">
                    <button class="answer-btn op-btn bg-purple-500 hover:bg-purple-600" onclick="checkComparison('>')">&gt;</button>
                    <button class="answer-btn op-btn bg-purple-500 hover:bg-purple-600" onclick="checkComparison('<')">&lt;</button>
                    <button class="answer-btn op-btn bg-purple-500 hover:bg-purple-600" onclick="checkComparison('=')">=</button>
                </div>
                <div class="flex flex-col items-center">
                    <div class="font-bold text-6xl text-orange-400 text-shadow" id="compare-num2"></div>
                </div>
            </div>
            <p class="text-center text-sm text-gray-500 mt-2" id="compare-feedback"></p>
        </div>

        <!-- Gh√©p c·∫∑p (Tr√≤ ch∆°i 4) -->
        <div class="section p-6 flex flex-col items-center relative">
            <div class="math-problem blue-text text-2xl sm:text-3xl">Gh√©p c·∫∑p</div>
            <div class="flex flex-wrap items-center justify-center space-x-4 my-4" id="matching-question">
                <!-- H√¨nh ·∫£nh s·∫Ω ƒë∆∞·ª£c t·∫°o ·ªü ƒë√¢y -->
            </div>
            <div class="grid grid-cols-2 gap-4 w-full max-w-sm mt-4" id="matching-options">
                <!-- C√°c s·ªë ƒë·ªÉ k√©o th·∫£ -->
            </div>
            <p class="text-center text-gray-500 text-sm mt-2" id="matching-feedback">H√£y k√©o s·ªë ƒë√∫ng v√†o √¥ vu√¥ng.</p>
        </div>
    </div>
</div>
<!-- Th√™m n√∫t ch∆°i l·∫°i -->
<div class="text-center mt-8">
    <button class="answer-btn bg-blue-500 hover:bg-blue-600" onclick="newGame()">Ch∆°i l·∫°i</button>
</div>

<script>
    /**
     * @fileoverview Qu·∫£n l√Ω logic cho t·∫•t c·∫£ c√°c tr√≤ ch∆°i h·ªçc to√°n tr√™n trang web.
     * @author Google
     */

    let totalScore = 0;
    let additionScore = 0;
    let subtractionScore = 0;
    let comparisonScore = 0;
    let matchingScore = 0;

    const totalScoreEl = document.getElementById('total-score');
    const additionScoreEl = document.getElementById('addition-score');
    const subtractionScoreEl = document.getElementById('subtraction-score');
    const comparisonScoreEl = document.getElementById('comparison-score');
    const matchingScoreEl = document.getElementById('matching-score');

    /**
     * C·∫≠p nh·∫≠t ƒëi·ªÉm s·ªë tr√™n giao di·ªán ng∆∞·ªùi d√πng.
     */
    function updateScoreDisplay() {
        totalScore = additionScore + subtractionScore + comparisonScore + matchingScore;
        totalScoreEl.textContent = totalScore;
        additionScoreEl.textContent = additionScore;
        subtractionScoreEl.textContent = subtractionScore;
        comparisonScoreEl.textContent = comparisonScore;
        matchingScoreEl.textContent = matchingScore;
    }

    /**
     * Th√™m ƒëi·ªÉm cho ng∆∞·ªùi ch∆°i v√† c·∫≠p nh·∫≠t hi·ªÉn th·ªã.
     * @param {string} game T√™n c·ªßa tr√≤ ch∆°i ('addition', 'subtraction', etc.).
     * @param {number} points S·ªë ƒëi·ªÉm c·∫ßn c·ªông ho·∫∑c tr·ª´.
     */
    function addScore(game, points) {
        if (game === 'addition') additionScore += points;
        if (game === 'subtraction') subtractionScore += points;
        if (game === 'comparison') comparisonScore += points;
        if (game === 'matching') matchingScore += points;

        // ƒê·∫£m b·∫£o ƒëi·ªÉm kh√¥ng √¢m cho t·ª´ng tr√≤ ch∆°i
        if (additionScore < 0) additionScore = 0;
        if (subtractionScore < 0) subtractionScore = 0;
        if (comparisonScore < 0) comparisonScore = 0;
        if (matchingScore < 0) matchingScore = 0;
        
        updateScoreDisplay();
    }


    // =================================================================
    // Game Ph√©p c·ªông
    // =================================================================
    const additionProblemEl = document.getElementById('addition-problem');
    const additionShapes1El = document.getElementById('addition-shapes-1');
    const additionShapes2El = document.getElementById('addition-shapes-2');
    const additionAnswerInput = document.getElementById('addition-answer');
    const additionFeedbackEl = document.getElementById('addition-feedback');

    let correctAdditionAnswer;

    /**
     * T·∫°o v√† hi·ªÉn th·ªã m·ªôt b√†i to√°n c·ªông m·ªõi.
     */
    function generateAdditionProblem() {
        const num1 = Math.floor(Math.random() * 5) + 1;
        const num2 = Math.floor(Math.random() * 5) + 1;
        correctAdditionAnswer = num1 + num2;
        
        additionProblemEl.textContent = `${num1} + ${num2} = ?`;
        additionShapes1El.innerHTML = createShapes(num1, '‚¨¢', '#6ee7b7');
        additionShapes2El.innerHTML = createShapes(num2, '‚¨ü', '#d8b4fe');
        additionAnswerInput.value = '';
        additionFeedbackEl.textContent = '(Ph√©p c·ªông)';
        additionAnswerInput.style.backgroundColor = 'white';
    }

    /**
     * Ki·ªÉm tra c√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng cho b√†i to√°n c·ªông.
     */
    function checkAddition() {
        const userAnswer = parseInt(additionAnswerInput.value);
        if (userAnswer === correctAdditionAnswer) {
            additionFeedbackEl.textContent = '‚úÖ Ch√≠nh x√°c!';
            addScore('addition', 10);
            additionAnswerInput.style.backgroundColor = '#d1fae5';
            setTimeout(generateAdditionProblem, 1000); // T·ª± ƒë·ªông chuy·ªÉn c√¢u h·ªèi
        } else {
            additionFeedbackEl.textContent = '‚ùå Sai r·ªìi, th·ª≠ l·∫°i nh√©!';
            addScore('addition', -5);
            additionAnswerInput.style.backgroundColor = '#fee2e2';
        }
    }

    // =================================================================
    // Game Ph√©p tr·ª´
    // =================================================================
    const subtractionProblemEl = document.getElementById('subtraction-problem');
    const subtractionShapes1El = document.getElementById('subtraction-shapes-1');
    const subtractionShapes2El = document.getElementById('subtraction-shapes-2');
    const subtractionAnswerInput = document.getElementById('subtraction-answer');
    const subtractionFeedbackEl = document.getElementById('subtraction-feedback');

    let correctSubtractionAnswer;

    /**
     * T·∫°o v√† hi·ªÉn th·ªã m·ªôt b√†i to√°n tr·ª´ m·ªõi.
     */
    function generateSubtractionProblem() {
        const num1 = Math.floor(Math.random() * 8) + 3; // ƒê·∫£m b·∫£o num1 ƒë·ªß l·ªõn
        const num2 = Math.floor(Math.random() * (num1 - 2)) + 1;
        correctSubtractionAnswer = num1 - num2;
        
        subtractionProblemEl.textContent = `${num1} - ${num2} = ?`;
        subtractionShapes1El.innerHTML = createShapes(num1, 'üçì');
        subtractionShapes2El.innerHTML = createShapes(num2, 'üçì');
        subtractionAnswerInput.value = '';
        subtractionFeedbackEl.textContent = '(Ph√©p tr·ª´)';
        subtractionAnswerInput.style.backgroundColor = 'white';
    }

    /**
     * Ki·ªÉm tra c√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng cho b√†i to√°n tr·ª´.
     */
    function checkSubtraction() {
        const userAnswer = parseInt(subtractionAnswerInput.value);
        if (userAnswer === correctSubtractionAnswer) {
            subtractionFeedbackEl.textContent = '‚úÖ Ch√≠nh x√°c!';
            addScore('subtraction', 10);
            subtractionAnswerInput.style.backgroundColor = '#d1fae5';
            setTimeout(generateSubtractionProblem, 1000); // T·ª± ƒë·ªông chuy·ªÉn c√¢u h·ªèi
        } else {
            subtractionFeedbackEl.textContent = '‚ùå Sai r·ªìi, th·ª≠ l·∫°i nh√©!';
            addScore('subtraction', -5);
            subtractionAnswerInput.style.backgroundColor = '#fee2e2';
        }
    }
    
    // =================================================================
    // Game So s√°nh
    // =================================================================
    const compareNum1El = document.getElementById('compare-num1');
    const compareNum2El = document.getElementById('compare-num2');
    const compareFeedbackEl = document.getElementById('compare-feedback');

    let correctComparisonOperator;

    /**
     * T·∫°o v√† hi·ªÉn th·ªã m·ªôt b√†i to√°n so s√°nh m·ªõi.
     */
    function generateComparisonProblem() {
        const num1 = Math.floor(Math.random() * 10) + 1;
        const num2 = Math.floor(Math.random() * 10) + 1;

        if (num1 > num2) {
            correctComparisonOperator = '>';
        } else if (num1 < num2) {
            correctComparisonOperator = '<';
        } else {
            correctComparisonOperator = '=';
        }
        
        compareNum1El.textContent = num1;
        compareNum2El.textContent = num2;
        compareFeedbackEl.textContent = '';
    }

    /**
     * Ki·ªÉm tra to√°n t·ª≠ so s√°nh m√† ng∆∞·ªùi d√πng ch·ªçn.
     * @param {string} selectedOperator To√°n t·ª≠ ƒë∆∞·ª£c ch·ªçn.
     */
    function checkComparison(selectedOperator) {
        if (selectedOperator === correctComparisonOperator) {
            compareFeedbackEl.textContent = '‚úÖ Ch√≠nh x√°c!';
            addScore('comparison', 10);
            compareFeedbackEl.style.color = '#10b981';
            setTimeout(generateComparisonProblem, 1000); // T·ª± ƒë·ªông chuy·ªÉn c√¢u h·ªèi
        } else {
            compareFeedbackEl.textContent = '‚ùå Sai r·ªìi, th·ª≠ l·∫°i nh√©!';
            addScore('comparison', -5);
            compareFeedbackEl.style.color = '#ef4444';
        }
    }

    // =================================================================
    // Game Gh√©p c·∫∑p (K√©o th·∫£)
    // =================================================================
    const matchingQuestionEl = document.getElementById('matching-question');
    const matchingOptionsEl = document.getElementById('matching-options');
    const matchingFeedbackEl = document.getElementById('matching-feedback');

    let correctMatchingAnswer;

    /**
     * T·∫°o v√† hi·ªÉn th·ªã m·ªôt b√†i to√°n gh√©p c·∫∑p m·ªõi.
     */
    function generateMatchingProblem() {
        // T·∫°o m·ªôt s·ªë ng·∫´u nhi√™n t·ª´ 1-4
        correctMatchingAnswer = Math.floor(Math.random() * 4) + 1;

        // T·∫°o c√¢u h·ªèi v·ªõi s·ªë l∆∞·ª£ng h√¨nh ·∫£nh t∆∞∆°ng ·ª©ng
        matchingQuestionEl.innerHTML = createShapes(correctMatchingAnswer, '‚öΩ', '#ef4444');

        // T·∫°o c√°c t√πy ch·ªçn tr·∫£ l·ªùi
        let options = [correctMatchingAnswer];
        while (options.length < 4) {
            const wrongAnswer = Math.floor(Math.random() * 8) + 1;
            if (!options.includes(wrongAnswer)) {
                options.push(wrongAnswer);
            }
        }
        options.sort(() => Math.random() - 0.5);

        matchingOptionsEl.innerHTML = '';
        options.forEach(num => {
            const div = document.createElement('div');
            div.className = 'bg-gray-200 rounded-lg p-2 text-3xl font-bold text-center border-2 border-gray-300 draggable';
            div.textContent = num;
            div.draggable = true;
            div.id = `draggable-${num}`;
            matchingOptionsEl.appendChild(div);
        });

        // T·∫°o m·ªôt drop zone
        const dropZone = document.createElement('div');
        dropZone.className = 'drop-zone flex items-center justify-center';
        dropZone.innerHTML = '<span>K√©o v√†o ƒë√¢y</span>';
        dropZone.id = 'matching-drop-zone';
        matchingOptionsEl.appendChild(dropZone);

        matchingFeedbackEl.textContent = 'H√£y k√©o s·ªë ƒë√∫ng v√†o √¥ vu√¥ng.';
        setupDragAndDrop();
    }
    
    /**
     * Ki·ªÉm tra ƒë√°p √°n k√©o th·∫£ cho tr√≤ ch∆°i gh√©p c·∫∑p.
     * @param {number} draggedNumber S·ªë ƒë∆∞·ª£c k√©o.
     */
    function checkMatching(draggedNumber) {
        if (draggedNumber === correctMatchingAnswer) {
            matchingFeedbackEl.textContent = '‚úÖ Ch√≠nh x√°c!';
            matchingFeedbackEl.style.color = '#10b981';
            addScore('matching', 10);
            setTimeout(generateMatchingProblem, 1000);
        } else {
            matchingFeedbackEl.textContent = '‚ùå Sai r·ªìi, th·ª≠ l·∫°i nh√©!';
            matchingFeedbackEl.style.color = '#ef4444';
            addScore('matching', -5);
        }
    }


    /**
     * Thi·∫øt l·∫≠p c√°c s·ª± ki·ªán k√©o th·∫£ cho tr√≤ ch∆°i gh√©p c·∫∑p.
     */
    function setupDragAndDrop() {
        const draggables = document.querySelectorAll('.draggable');
        const dropZone = document.getElementById('matching-drop-zone');

        draggables.forEach(draggable => {
            draggable.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', e.target.textContent);
            });
        });

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('active');
        });
        
        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('active');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('active');
            const data = e.dataTransfer.getData('text/plain');
            checkMatching(parseInt(data));
        });
    }

    /**
     * H√†m ti·ªán √≠ch ƒë·ªÉ t·∫°o c√°c h√¨nh ·∫£nh/emoji.
     * @param {number} count S·ªë l∆∞·ª£ng h√¨nh ·∫£nh c·∫ßn t·∫°o.
     * @param {string} shape H√¨nh d·∫°ng (emoji ho·∫∑c k√Ω t·ª±).
     * @param {string} color M√†u s·∫Øc (t√πy ch·ªçn).
     * @returns {string} Chu·ªói HTML c·ªßa c√°c h√¨nh ·∫£nh.
     */
    function createShapes(count, shape, color = '') {
        let shapes = '';
        for (let i = 0; i < count; i++) {
            shapes += `<span class="shape" style="color: ${color};">${shape}</span>`;
        }
        return shapes;
    }

    /**
     * Reset to√†n b·ªô game v√† b·∫Øt ƒë·∫ßu l·∫°i.
     */
    function newGame() {
        totalScore = 0;
        additionScore = 0;
        subtractionScore = 0;
        comparisonScore = 0;
        matchingScore = 0;
        updateScoreDisplay();
        generateAdditionProblem();
        generateSubtractionProblem();
        generateComparisonProblem();
        generateMatchingProblem();
    }


    // Kh·ªüi t·∫°o t·∫•t c·∫£ c√°c tr√≤ ch∆°i khi trang t·∫£i xong
    window.onload = newGame;
</script>

</body>
</html>
