<div id="kiemtra" class="test-section main-section">
  <div class="test-container">
    <h1>B√†i ki·ªÉm tra To√°n l·ªõp 1</h1>
    <p class="test-description">
      Ho√†n th√†nh c√°c ph√©p t√≠nh d∆∞·ªõi ƒë√¢y. C·ªë l√™n nh√©! ‚ú®
    </p>
    <form id="quiz-form">
      <!-- C√°c c√¢u h·ªèi s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y b·∫±ng JavaScript -->
    </form>
    <button id="submit-test-btn" class="btn btn-primary">N·ªôp b√†i</button>
    <div id="result-message" class="result-message"></div>
  </div>
</div>

<script>
  // H√†m n√†y s·∫Ω t·∫°o ng·∫´u nhi√™n c√°c c√¢u h·ªèi
  function generateQuiz() {
    const quizForm = document.getElementById("quiz-form");
    quizForm.innerHTML = ""; // X√≥a c√°c c√¢u h·ªèi c≈©
    const numQuestions = 10;
    const questions = [];

    for (let i = 0; i < numQuestions; i++) {
      let num1, num2, operator, correctAnswer;

      // ƒê·∫£m b·∫£o k·∫øt qu·∫£ ph√©p tr·ª´ kh√¥ng √¢m v√† c√°c s·ªë nh·ªè
      if (Math.random() > 0.5) {
        // Ph√©p c·ªông
        num1 = Math.floor(Math.random() * 10);
        num2 = Math.floor(Math.random() * (10 - num1)); // ƒê·∫£m b·∫£o t·ªïng <= 9
        operator = "+";
        correctAnswer = num1 + num2;
      } else {
        // Ph√©p tr·ª´
        num1 = Math.floor(Math.random() * 10) + 1; // ƒê·∫£m b·∫£o s·ªë l·ªõn h∆°n 0
        num2 = Math.floor(Math.random() * num1);
        operator = "-";
        correctAnswer = num1 - num2;
      }
      questions.push({
        question: `${num1} ${operator} ${num2} = ?`,
        correctAnswer: correctAnswer,
      });
    }

    questions.forEach((q, index) => {
      const questionDiv = document.createElement("div");
      questionDiv.classList.add("question-item");
      questionDiv.innerHTML = `
                <label for="q${index}">${index + 1}. ${q.question}</label>
                <input type="number" id="q${index}" name="q${index}" required>
            `;
      quizForm.appendChild(questionDiv);
    });

    // L∆∞u ƒë√°p √°n v√†o m·ªôt bi·∫øn to√†n c·ª•c ho·∫∑c thu·ªôc t√≠nh c·ªßa form
    quizForm.dataset.answers = JSON.stringify(
      questions.map((q) => q.correctAnswer)
    );
  }

  // X·ª≠ l√Ω s·ª± ki·ªán n·ªôp b√†i
  document.getElementById("submit-test-btn").addEventListener("click", () => {
    const quizForm = document.getElementById("quiz-form");
    const resultMessage = document.getElementById("result-message");
    const answers = JSON.parse(quizForm.dataset.answers);
    let score = 0;
    let totalQuestions = answers.length;

    // L·∫•y c√°c c√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng
    const userAnswers = [];
    for (let i = 0; i < totalQuestions; i++) {
      const input = document.getElementById(`q${i}`);
      userAnswers.push(parseInt(input.value));
    }

    // Ch·∫•m ƒëi·ªÉm
    for (let i = 0; i < totalQuestions; i++) {
      if (userAnswers[i] === answers[i]) {
        score++;
      }
    }

    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    resultMessage.textContent = `B·∫°n ƒë√£ l√†m ƒë√∫ng ${score} / ${totalQuestions} c√¢u.`;
    if (score === totalQuestions) {
      resultMessage.textContent += " Ch√∫c m·ª´ng, b·∫°n th·∫≠t gi·ªèi! üéâ";
      resultMessage.style.color = "green";
    } else {
      resultMessage.textContent += " H√£y c·ªë g·∫Øng h∆°n nh√©. üí™";
      resultMessage.style.color = "red";
    }

    // C√≥ th·ªÉ th√™m hi·ªáu ·ª©ng ho·∫∑c th√¥ng b√°o kh√°c ·ªü ƒë√¢y
  });

  // T·∫°o b√†i ki·ªÉm tra khi trang ƒë∆∞·ª£c t·∫£i
  document.addEventListener("DOMContentLoaded", generateQuiz);
</script>

<style>
  .test-section {
    background-color: #ffffff;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    max-width: 700px;
    margin: 40px auto;
    animation: fadeIn 0.8s ease-in-out;
  }
  .test-container {
    text-align: center;
  }
  .test-section h1 {
    color: #4a90e2;
    margin-bottom: 10px;
  }
  .test-description {
    font-style: italic;
    color: #666;
    margin-bottom: 25px;
  }
  .question-item {
    margin-bottom: 20px;
    text-align: left;
  }
  .question-item label {
    font-weight: bold;
    color: #333;
    display: block;
    margin-bottom: 8px;
  }
  .question-item input {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1.2em;
    transition: border-color 0.3s, box-shadow 0.3s;
  }
  .question-item input:focus {
    border-color: #4a90e2;
    box-shadow: 0 0 8px rgba(74, 144, 226, 0.3);
  }
  #submit-test-btn {
    background-color: #28a745;
    color: white;
    border: none;
    padding: 12px 25px;
    font-size: 1.1em;
    font-weight: bold;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
    margin-top: 20px;
  }
  #submit-test-btn:hover {
    background-color: #218838;
    transform: translateY(-2px);
  }
  .result-message {
    margin-top: 25px;
    font-size: 1.2em;
    font-weight: bold;
  }
</style>
